{"version":3,"sources":["../../src/pages/datos/datos.module.ts","../../src/pages/datos/datos.ts"],"names":[],"mappings":"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","file":"22.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DatosPage } from './datos';\n\n@NgModule({\n  declarations: [\n    DatosPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DatosPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/datos/datos.module.ts","import { Component } from '@angular/core';\r\nimport { AppVersion } from '@ionic-native/app-version';\r\nimport { IonicPage, NavController, NavParams, AlertController, ModalController } from 'ionic-angular';\r\nimport { AriagroDataProvider } from '../../providers/ariagro-data/ariagro-data';\r\nimport { LocalDataProvider } from '../../providers/local-data/local-data';\r\nimport { ViewController } from 'ionic-angular';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-datos',\r\n  templateUrl: 'datos.html',\r\n})\r\nexport class DatosPage {\r\n settings: any = {};\r\n  version: string = \"ARIAGRO APP V2\";\r\n  user: any = {};\r\n\r\n  constructor(public navCtrl: NavController,  public appVersion: AppVersion, public navParams: NavParams,\r\n    public alertCrtl: AlertController, public viewCtrl: ViewController,\r\n    public ariagroData: AriagroDataProvider, public localData: LocalDataProvider, public modalCtrl: ModalController) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.localData.getSettings().then(data => {\r\n      if (data) {\r\n        this.settings = JSON.parse(data);\r\n        this.viewCtrl.setBackButtonText('');\r\n        if (this.settings.user) {\r\n          this.user = this.settings.user;\r\n          this.ariagroData.login(this.settings.parametros.url, this.user.login, this.user.password)\r\n          .subscribe(\r\n            (data) => {\r\n              this.settings.user = data;\r\n              this.user = this.settings.user;\r\n              this.localData.saveSettings(this.settings);\r\n              \r\n            },\r\n            (error) => {\r\n              if (error.status == 404) {\r\n                this.showAlert(\"AVISO\", \"Usuario o contraseÃ±a incorrectos\");\r\n              } else {\r\n                this.showAlert(\"ERROR\", JSON.stringify(error, null, 4));\r\n              }\r\n            }\r\n          );\r\n        } else {\r\n          this.navCtrl.setRoot('LoginPage');\r\n        }\r\n      } else {\r\n        this.navCtrl.setRoot('ParametrosPage');\r\n      }\r\n    });\r\n    try {\r\n      this.appVersion.getVersionNumber().then(vrs => {\r\n        this.version = \"ARIAGRO APP V\" + vrs;\r\n      },\r\n        error => {\r\n          // NO hacemos nada, en realidad protegemos al estar en debug\r\n          // con el navegador\r\n        });\r\n    } catch (error) {\r\n\r\n    }\r\n  }\r\n\r\n  goHome(): any {\r\n    this.navCtrl.setRoot('HomePage');\r\n  }\r\n\r\n  showAlert(title, subTitle): void {\r\n    let alert = this.alertCrtl.create({\r\n      title: title,\r\n      subTitle: subTitle,\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  cambioDatos(): void {\r\n    let modal = this.modalCtrl.create('ModalDatosCambiarPage');\r\n    modal.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/datos/datos.ts"],"sourceRoot":""}