{"version":3,"sources":["../../src/pages/modal-calidades-campo/modal-calidades-campo.module.ts","../../src/pages/modal-calidades-campo/modal-calidades-campo.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ModalCalidadesCampoPage } from './modal-calidades-campo';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ModalCalidadesCampoPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ModalCalidadesCampoPage),\r\n  ],\r\n})\r\nexport class ModalCalidadesCampoPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-calidades-campo/modal-calidades-campo.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, AlertController, LoadingController  } from 'ionic-angular';\r\nimport { AriagroDataProvider } from '../../providers/ariagro-data/ariagro-data';\r\nimport { LocalDataProvider } from '../../providers/local-data/local-data';\r\nimport * as numeral from 'numeral';\r\n\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-modal-calidades-campo',\r\n  templateUrl: 'modal-calidades-campo.html',\r\n})\r\nexport class ModalCalidadesCampoPage {\r\n\r\n  settings: any = {};\r\n  campanya: any = {};\r\n  user: any = {};\r\n  campo: any = {};\r\n  calidades: any = [];\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController,\r\n     public localData: LocalDataProvider, public alertCrtl: AlertController, public loadingCtrl: LoadingController, \r\n     public ariagroData: AriagroDataProvider) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.localData.getSettings().then(data => {\r\n      if (data) {\r\n        this.settings = JSON.parse(data);\r\n        this.viewCtrl.setBackButtonText('');\r\n        this.user = this.settings.user;\r\n        this.campanya = this.settings.campanya;\r\n        this.campo = this.navParams.get('campo');\r\n        this.loadCalidades();\r\n\r\n      } else {\r\n        this.navCtrl.setRoot('ParametrosPage');\r\n      }\r\n    });\r\n  }\r\n\r\n  loadCalidades(): void {\r\n    let loading = this.loadingCtrl.create({ content: 'Buscando clasificacion...' });\r\n    loading.present();\r\n    this.ariagroData.getCampoClasificacion(this.settings.parametros.url, this.campo.codcampo, this.campanya.ariagro)\r\n    .subscribe(\r\n      (data) => {\r\n        loading.dismiss();\r\n        this.calidades = this.prepareData(data);\r\n      },\r\n      (error) => {\r\n        loading.dismiss();\r\n        this.showAlert(\"ERROR\", JSON.stringify(error, null, 4));\r\n      }\r\n    );\r\n  }\r\n\r\n  prepareData(calidades): any {\r\n    var contador = 1;\r\n    calidades.forEach(a => {\r\n      if(a.kilos != null) {\r\n        a.contador = contador++;\r\n        a.kilos = numeral(a.kilos).format('0,0');\r\n      }\r\n    });\r\n    return calidades;\r\n  }\r\n\r\n  showAlert(title, subTitle): void {\r\n    let alert = this.alertCrtl.create({\r\n      title: title,\r\n      subTitle: subTitle,\r\n      buttons: ['OK']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  dismiss(): void {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-calidades-campo/modal-calidades-campo.ts"],"sourceRoot":""}